{
  "name": "My workflow 17",
  "nodes": [
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "https://drive.google.com/drive/u/1/folders/1IqHYjrTjxVJ_DqtLRc0PW5aoWPNuixxU",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": ""
        }
      },
      "id": "4e88df87-9ea5-439e-ae53-0da89f00c022",
      "name": "å†™å…¥æ—¥å¿—(å¯é€‰)1",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        -48,
        -2736
      ],
      "typeVersion": 4,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "RKH9yhZxmWCz4T3d",
          "name": "Google Sheets account 4"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "mode": "insert",
        "pineconeIndex": {
          "__rl": true,
          "value": "workshop20250708",
          "mode": "list",
          "cachedResultName": "workshop20250708"
        },
        "options": {
          "pineconeNamespace": "ns_04"
        }
      },
      "id": "1c8d4669-8f2b-4ca5-b833-4b3d9122fc8a",
      "name": "å­˜å‚¨å‘é‡åˆ°Pinecone1",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "position": [
        -432,
        -2736
      ],
      "typeVersion": 1.1,
      "credentials": {
        "pineconeApi": {
          "id": "0BH74Kjg8OdmzZqM",
          "name": "pinecone-workshop"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "6dbba185-8cc1-4cfb-9afe-88fca6108b96",
      "name": "OpenAI åµŒå…¥æ¨¡å‹ï¼ˆå­˜å‚¨ï¼‰1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "position": [
        -624,
        -2560
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "i9YtN4AdSgS8mWcx",
          "name": "openai-workshop"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "3a44c2ec-5111-4067-a49a-43aa2aa3a02e",
      "name": "æ–‡æœ¬åˆ†å‰²å™¨1",
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "position": [
        -464,
        -2384
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "dataType": "binary",
        "options": {}
      },
      "id": "71315158-85fe-44d1-afa9-6bf0d6ce449d",
      "name": "æ–‡æ¡£åŠ è½½å™¨1",
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "position": [
        -464,
        -2560
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $json.id }}"
        },
        "options": {}
      },
      "id": "43fa95b7-60cd-4e48-b7e3-197bc052f1da",
      "name": "ä¸‹è½½æ–‡ä»¶1",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        -768,
        -2736
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "vbdaWrMUy7QV10oi",
          "name": "drive-workshop"
        }
      }
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1IqHYjrTjxVJ_DqtLRc0PW5aoWPNuixxU",
          "mode": "list",
          "cachedResultName": "ns_04",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1IqHYjrTjxVJ_DqtLRc0PW5aoWPNuixxU"
        },
        "event": "fileCreated",
        "options": {}
      },
      "id": "52760fe8-8d28-449f-935e-6966a42bc27a",
      "name": "Google Drive è§¦å‘å™¨1",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "position": [
        -1136,
        -2736
      ],
      "typeVersion": 1,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "vbdaWrMUy7QV10oi",
          "name": "drive-workshop"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ä¾›åº”é“¾é¡¾é—®ã€‚è¯·æ ¹æ®ä»¥ä¸‹éœ€æ±‚åˆ†æå¹¶æ¨èåˆé€‚çš„ä¾›åº”å•†ï¼š\n\nç”¨æˆ·éœ€æ±‚ï¼š{{ $json.query }}\n\né¢æ–™ï¼š{{ $json.material }}\né¢œè‰²ï¼š{{ $json.color }}\nå…‹é‡ï¼š{{ $json.weight }}\né¢„ç®—ï¼š{{ $json.budget }}å…ƒ\næ•°é‡ï¼š{{ $json.quantity }}ä»¶\nåœ°åŒºåå¥½ï¼š{{ $json.location }}\n\nå¯ç”¨ä¾›åº”å•†æ•°æ®åº“ï¼š\n{{ $json.supplierDatabase }}\n\nè¯·ä»ä»¥ä¸‹ç»´åº¦è¿›è¡Œä¸“ä¸šåˆ†æï¼š\n1. æ¨è3-5ä¸ªæœ€é€‚åˆçš„ä¾›åº”å•†ï¼ˆä»ä¸Šè¿°æ•°æ®åº“ä¸­ç­›é€‰ï¼‰\n2. ä»·æ ¼å¯¹æ¯”åˆ†æ\n3. è´¨é‡è¯„ä¼°\n4. äº¤è´§æœŸåˆ†æ\n5. é‡‡è´­å»ºè®®\n6. æ½œåœ¨é£é™©æç¤º\n\nè¯·ä»¥ç»“æ„åŒ–çš„æ–¹å¼è¾“å‡ºåˆ†æç»“æœã€‚",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -544,
        -2064
      ],
      "id": "b4742457-f27f-41e8-ac76-de85f9387dfb",
      "name": "AI Agent ä¾›åº”å•†åˆ†æ"
    },
    {
      "parameters": {
        "jsCode": "// ä¾›åº”å•†åˆ†æç»“æœç›´æ¥è¾“å‡º\nconst input = $input.first().json;\nconst analysis = input.output || input.text || input.message || '';\n\n// ç›´æ¥è¿”å›å®Œæ•´åˆ†æï¼Œè®©å‰ç«¯æ˜¾ç¤º\nconst result = {\n  success: true,\n  analysis: analysis,\n  timestamp: new Date().toISOString()\n};\n\nreturn [{ json: result }];"
      },
      "id": "ec5cd363-81e2-4845-9a68-2800300b0034",
      "name": "æ ¼å¼åŒ–è¾“å‡ºç»“æœ",
      "type": "n8n-nodes-base.code",
      "position": [
        -240,
        -2064
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        -96,
        -2064
      ],
      "id": "a44c7033-062a-494e-9259-52c819f24e46",
      "name": "è¿”å›ç»“æœ",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "api/supplier-query",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "975aa5e8-3a13-40f8-8c03-1f84f2788273",
      "name": "ä¾›åº”é“¾æŸ¥è¯¢ Webhook1",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -960,
        -2064
      ],
      "typeVersion": 2.1,
      "webhookId": "supplier-webhook",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-3-5-sonnet-20241022",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 3.5 (New)"
        },
        "options": {}
      },
      "id": "63f6c867-99c4-4922-8500-ea3850250fcd",
      "name": "Claude ä¾›åº”å•†åˆ†æ1",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "position": [
        -544,
        -1872
      ],
      "typeVersion": 1.3,
      "credentials": {
        "anthropicApi": {
          "id": "2yygkXpqmsCmEtAB",
          "name": "claude-workshop"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// ä¾›åº”é“¾æŸ¥è¯¢è¯·æ±‚éªŒè¯å’Œæµ‹è¯•æ•°æ®\nconst rawInput = $input.first().json;\nconst input = rawInput.body || rawInput;\n\n// æµ‹è¯•ä¾›åº”å•†æ•°æ®ï¼ˆ10ä¸ªä¾›åº”å•†ï¼‰\nconst testSuppliers = [\n  {id: \"supplier_001\", name: \"ä¼˜è´¨æ£‰çººå‚\", material: \"cotton blend\", color: \"navy blue\", weight: \"200gsm\", price: 45, quality: \"A+\", delivery: \"7-10å¤©\", location: \"æ±Ÿè‹å—é€š\", rating: 95},\n  {id: \"supplier_002\", name: \"ä¸ç»¸ä¸“è¥åº—\", material: \"silk satin\", color: \"ivory white\", weight: \"120gsm\", price: 120, quality: \"A+\", delivery: \"5-7å¤©\", location: \"æµ™æ±Ÿæ­å·\", rating: 98},\n  {id: \"supplier_003\", name: \"è¿åŠ¨é¢æ–™å‚\", material: \"polyester blend\", color: \"black\", weight: \"180gsm\", price: 35, quality: \"A\", delivery: \"10-14å¤©\", location: \"å¹¿ä¸œä½›å±±\", rating: 92},\n  {id: \"supplier_004\", name: \"ç‰›ä»”å¸ƒä¾›åº”å•†\", material: \"denim\", color: \"indigo blue\", weight: \"300gsm\", price: 55, quality: \"A\", delivery: \"14-21å¤©\", location: \"å±±ä¸œé’å²›\", rating: 88},\n  {id: \"supplier_005\", name: \"äºšéº»é¢æ–™å•†\", material: \"linen\", color: \"natural beige\", weight: \"160gsm\", price: 65, quality: \"A+\", delivery: \"7-10å¤©\", location: \"æ²³å—éƒ‘å·\", rating: 94},\n  {id: \"supplier_006\", name: \"é’ˆç»‡é¢æ–™å‚\", material: \"cotton fleece\", color: \"grey\", weight: \"220gsm\", price: 38, quality: \"A\", delivery: \"5-8å¤©\", location: \"æ±Ÿè‹è‹å·\", rating: 90},\n  {id: \"supplier_007\", name: \"çš®é©ä¾›åº”å•†\", material: \"leather\", color: \"brown\", weight: \"1.2mm\", price: 180, quality: \"A+\", delivery: \"21-28å¤©\", location: \"æ²³åŒ—ä¿å®š\", rating: 96},\n  {id: \"supplier_008\", name: \"å¸†å¸ƒä¸“è¥\", material: \"canvas\", color: \"olive green\", weight: \"400gsm\", price: 42, quality: \"A\", delivery: \"10-12å¤©\", location: \"ç¦å»ºæ³‰å·\", rating: 89},\n  {id: \"supplier_009\", name: \"é›ªçººé¢æ–™å•†\", material: \"cotton voile\", color: \"floral print\", weight: \"80gsm\", price: 28, quality: \"B+\", delivery: \"7-10å¤©\", location: \"æµ™æ±Ÿç»å…´\", rating: 85},\n  {id: \"supplier_010\", name: \"æ ¼å­å¸ƒä¾›åº”å•†\", material: \"cotton gingham\", color: \"red check\", weight: \"140gsm\", price: 32, quality: \"A\", delivery: \"5-7å¤©\", location: \"å±±ä¸œæ½åŠ\", rating: 91}\n];\n\n// å°†ä¾›åº”å•†æ•°ç»„æ ¼å¼åŒ–ä¸ºJSONå­—ç¬¦ä¸²\nconst supplierDatabaseText = JSON.stringify(testSuppliers, null, 2);\n\n// éªŒè¯è¾“å…¥æ•°æ®\nconst validatedInput = {\n  material: (input && input.material) ? String(input.material) : \"æœªæŒ‡å®šé¢æ–™\",\n  color: (input && input.color) ? String(input.color) : \"æœªæŒ‡å®šé¢œè‰²\",\n  weight: (input && input.weight) ? String(input.weight) : \"æœªæŒ‡å®šå…‹é‡\",\n  budget: (input && input.budget) ? Number(input.budget) : 0,\n  quantity: (input && input.quantity) ? Number(input.quantity) : 1000,\n  location: (input && input.location) ? String(input.location) : \"å…¨å›½\",\n  query: `å¯»æ‰¾${(input && input.material) || 'é¢æ–™'}ä¾›åº”å•†ï¼Œé¢œè‰²ï¼š${(input && input.color) || 'ä¸é™'}ï¼Œå…‹é‡ï¼š${(input && input.weight) || 'ä¸é™'}ï¼Œé¢„ç®—ï¼š${(input && input.budget) || 'ä¸é™'}ï¼Œåœ°åŒºï¼š${(input && input.location) || 'å…¨å›½'}`,\n  supplierDatabase: supplierDatabaseText\n};\n\nreturn [{ json: validatedInput }];"
      },
      "id": "68b85b50-6f7c-4a6e-821a-3af65585df28",
      "name": "éªŒè¯ä¾›åº”å•†è¾“å…¥1",
      "type": "n8n-nodes-base.code",
      "position": [
        -768,
        -2064
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.question }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -272,
        -1456
      ],
      "id": "22a26950-8a3f-4a7a-9dc5-32ef1551f5f1",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "jsCode": "// çŸ¥è¯†é—®ç­”ç»“æœæ ¼å¼åŒ–\nconst input = $input.first().json;\nconst answer = input.output || input.text || input.message || '';\n\n// åŸºç¡€ç»“æ„\nconst result = {\n  success: true,\n  answer: answer,\n  metadata: {\n    confidence: 'high',\n    timestamp: new Date().toISOString(),\n    source: 'ai_assistant'\n  }\n};\n\n// æ™ºèƒ½æå–ï¼šå¦‚æœæœ‰ Markdown æ ‡é¢˜ï¼Œæå–ä¸»è¦å†…å®¹\nconst sections = [];\nconst headingMatches = answer.matchAll(/^#{1,3}\\s+(.+)$/gm);\nfor (const match of headingMatches) {\n  sections.push(match[1].trim());\n}\n\nif (sections.length > 0) {\n  result.metadata.sections = sections;\n}\n\n// æå–å…³é”®è¦ç‚¹ï¼ˆæ•°å­—åˆ—è¡¨æˆ–é¡¹ç›®ç¬¦å·ï¼‰\nconst keyPoints = [];\nconst listMatches = answer.matchAll(/^[\\*\\-]\\s+\\*\\*(.+?)\\*\\*[ï¼š:]?(.+?)$/gm);\nfor (const match of listMatches) {\n  keyPoints.push({\n    title: match[1].trim(),\n    content: match[2].trim()\n  });\n}\n\nif (keyPoints.length > 0) {\n  result.metadata.keyPoints = keyPoints;\n}\n\nreturn [{ json: result }];"
      },
      "id": "d4fa8217-0cb3-49ff-8061-7b364bc9f1a0",
      "name": "æ ¼å¼åŒ–é—®ç­”è¾“å‡º1",
      "type": "n8n-nodes-base.code",
      "position": [
        208,
        -1456
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-sonnet-4-20250514",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 4"
        },
        "options": {}
      },
      "id": "938776a5-bf48-4698-8e4e-7e8323b29a03",
      "name": "Claude çŸ¥è¯†é—®ç­”1",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "position": [
        -272,
        -1264
      ],
      "typeVersion": 1.3,
      "credentials": {
        "anthropicApi": {
          "id": "2yygkXpqmsCmEtAB",
          "name": "claude-workshop"
        }
      },
      "notes": "={{ $('çŸ¥è¯†åº“æ£€ç´¢').item.json.documents }} "
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "knowledge_base",
        "toolDescription": "æ£€ç´¢ä¸“ä¸šçŸ¥è¯†æ–‡æ¡£ï¼Œç”¨äºå›ç­”è®¾è®¡ç›¸å…³é—®é¢˜",
        "pineconeIndex": {
          "__rl": true,
          "value": "workshop20250708",
          "mode": "list",
          "cachedResultName": "workshop20250708"
        },
        "options": {
          "pineconeNamespace": "ns_04"
        }
      },
      "id": "7df9122a-4d2f-48da-984b-fa66c7edd7dc",
      "name": "çŸ¥è¯†åº“æ£€ç´¢1",
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "position": [
        -144,
        -1232
      ],
      "typeVersion": 1.2,
      "credentials": {
        "pineconeApi": {
          "id": "0BH74Kjg8OdmzZqM",
          "name": "pinecone-workshop"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "4ad35521-5c68-473b-a9ca-0decc62e8929",
      "name": "OpenAI åµŒå…¥æ¨¡å‹1",
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "position": [
        -144,
        -1072
      ],
      "typeVersion": 1.2,
      "credentials": {
        "openAiApi": {
          "id": "i9YtN4AdSgS8mWcx",
          "name": "openai-workshop"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// çŸ¥è¯†é—®ç­”è¯·æ±‚éªŒè¯\nconst input = $input.first().json;\n\n// é»˜è®¤æµ‹è¯•é—®é¢˜\nconst defaultQuestion = \"é’ˆç»‡é¢æ–™åœ¨è¿åŠ¨è£…ä¸­çš„åº”ç”¨æ³¨æ„äº‹é¡¹æœ‰å“ªäº›ï¼Ÿ\";\n\n// ç»Ÿä¸€è¿”å›ç»“æ„\nconst validatedInput = {\n  question: input.question || defaultQuestion,\n  context: input.context || \"\",\n  category: input.category || \"general\"\n};\n\nreturn [{ json: validatedInput }];"
      },
      "id": "586f2d62-0ef6-4448-8f43-76dc11fa5355",
      "name": "éªŒè¯é—®ç­”è¾“å…¥1",
      "type": "n8n-nodes-base.code",
      "position": [
        -640,
        -1456
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "api/knowledge-qa",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "06a3f024-abf1-439c-92ee-a4651b91262e",
      "name": "çŸ¥è¯†é—®ç­” Webhook1",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -1104,
        -1456
      ],
      "typeVersion": 1,
      "webhookId": "knowledge-qa-webhook"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        416,
        -1456
      ],
      "id": "301c0171-9fd3-4338-9a00-2607e07b0564",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.description }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -80,
        -640
      ],
      "id": "c082e3e0-a1b9-4923-a4fd-8f9c4bb46a03",
      "name": "AI Agent3"
    },
    {
      "parameters": {
        "jsCode": "// çµæ„Ÿåˆ†æç»“æœæ ¼å¼åŒ–\nconst input = $input.first().json;\nconst analysis = input.output || input.text || input.message || '';\n\n// ç®€åŒ–è¾“å‡ºç»“æ„ï¼Œå®Œæ•´ä¿ç•™ Markdown æ ¼å¼\nconst result = {\n  success: true,\n  analysis: analysis,\n  metadata: {\n    timestamp: new Date().toISOString(),\n    source: 'ai_inspiration_analysis',\n    confidence: 'high'\n  }\n};\n\n// æ™ºèƒ½æå–ï¼šå¦‚æœæœ‰ Markdown æ ‡é¢˜ï¼Œæå–ä¸»è¦ç« èŠ‚\nconst sections = [];\nconst headingMatches = analysis.matchAll(/^#{1,3}\\s+(.+)$/gm);\nfor (const match of headingMatches) {\n  sections.push(match[1].trim());\n}\n\nif (sections.length > 0) {\n  result.metadata.sections = sections;\n}\n\n// æ™ºèƒ½æå–ï¼šå…³é”®è®¾è®¡å…ƒç´ ï¼ˆå¯é€‰ï¼‰\nconst designElements = [];\nconst bulletMatches = analysis.matchAll(/^[\\*\\-]\\s+\\*\\*(.+?)\\*\\*[ï¼š:]?(.+?)$/gm);\nfor (const match of bulletMatches) {\n  designElements.push({\n    element: match[1].trim(),\n    description: match[2].trim()\n  });\n}\n\nif (designElements.length > 0) {\n  result.metadata.designElements = designElements;\n}\n\nreturn [{ json: result }];"
      },
      "id": "128de6b6-1121-44ab-bd5a-87a23166c6a4",
      "name": "æ ¼å¼åŒ–çµæ„Ÿåˆ†æç»“æœ1",
      "type": "n8n-nodes-base.code",
      "position": [
        416,
        -624
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-3-5-sonnet-20241022",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 3.5 (New)"
        },
        "options": {}
      },
      "id": "42cf2647-6a84-423b-8f15-e64bf014c7f2",
      "name": "Claude çµæ„Ÿåˆ†æ1",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "position": [
        -80,
        -464
      ],
      "typeVersion": 1.3,
      "credentials": {
        "anthropicApi": {
          "id": "2yygkXpqmsCmEtAB",
          "name": "claude-workshop"
        }
      }
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "queryString": "mimeType=\"application/pdf\" and \"1IqHYjrTjxVJ_DqtLRc0PW5aoWPNuixxU\" in parents",
        "filter": {
          "folderId": {
            "__rl": true,
            "value": "1IqHYjrTjxVJ_DqtLRc0PW5aoWPNuixxU",
            "mode": "list",
            "cachedResultName": "ns_04",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1IqHYjrTjxVJ_DqtLRc0PW5aoWPNuixxU"
          }
        },
        "options": {}
      },
      "id": "487e208e-3570-4f72-b0c7-5edd296f7c73",
      "name": "Google Drive è¶‹åŠ¿æœç´¢1",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        -32,
        -800
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "vbdaWrMUy7QV10oi",
          "name": "drive-workshop"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// çµæ„Ÿæ”¶é›†è¯·æ±‚éªŒè¯\nconst input = $input.first().json;\n\n// é»˜è®¤æµ‹è¯•çµæ„Ÿ\nconst defaultInspiration = {\n  keywords: \"vintage sporty\",\n  category: \"outerwear\",\n  season: \"autumn\",\n  description: \"å¤å¤è¿åŠ¨é£ï¼Œoversizedå»“å½¢ï¼Œæ‹¼æ¥è®¾è®¡\"\n};\n\n// ç»Ÿä¸€è¿”å›ç»“æ„ - ç¡®ä¿æ€»æ˜¯æœ‰ description å­—æ®µ\nconst validatedInput = {\n  keywords: input.keywords || defaultInspiration.keywords,\n  category: input.category || defaultInspiration.category,\n  season: input.season || defaultInspiration.season,\n  description: input.description || \n               (input.keywords ? `${input.keywords}é£æ ¼çš„æœè£…è®¾è®¡çµæ„Ÿ` : defaultInspiration.description)\n};\n\nreturn [{ json: validatedInput }];"
      },
      "id": "deecbe91-3aa0-42e5-913c-b802596d2b36",
      "name": "éªŒè¯çµæ„Ÿè¾“å…¥1",
      "type": "n8n-nodes-base.code",
      "position": [
        -528,
        -640
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "api/inspiration-collect",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "12af41f7-2ae9-4a49-bb25-9bcba409ac47",
      "name": "çµæ„Ÿæ”¶é›† Webhook1",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -928,
        -640
      ],
      "typeVersion": 1,
      "webhookId": "inspiration-webhook"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        624,
        -624
      ],
      "id": "87e51074-ed22-4dca-9fb9-3126bf92f73c",
      "name": "Respond to Webhook1"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "api/pattern-risk-analysis",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "3dde391b-2708-4a78-b8c2-1f93a32136a2",
      "name": "æ‰“ç‰ˆå¸®åŠ©Webhook",
      "type": "n8n-nodes-base.webhook",
      "position": [
        -816,
        -32
      ],
      "typeVersion": 2.1,
      "webhookId": "pattern-risk-webhook"
    },
    {
      "parameters": {
        "jsCode": "// æ£€æµ‹å›¾ç‰‡ä¸Šä¼ ï¼Œç›´æ¥è¿”å› mock dataï¼ˆæ¼”ç¤ºç”¨ï¼‰\nconst rawInput = $input.first().json;\n\n// æ£€æŸ¥æ˜¯å¦ä¸Šä¼ äº†å›¾ç‰‡ï¼ˆmultipart/form-data æ ¼å¼ï¼‰\nconst hasImage = rawInput.body && (rawInput.body.fileName || rawInput.body.fileType);\n\n// Mock Data - å‡è£…æ˜¯ä»å›¾ç‰‡ä¸­åˆ†æå‡ºæ¥çš„è®¾è®¡ä¿¡æ¯\nconst mockData = {\n  description: \"oversizedå·¥è£…å¤¹å…‹ï¼Œå®½æ¾ç‰ˆå‹ï¼Œå¤šå£è¢‹æ‹¼æ¥è®¾è®¡\",\n  image: hasImage ? \"uploaded\" : null,\n  style: \"street wear\",\n  material: \"cotton blend\",\n  complexity: \"medium-high\"\n};\n\nreturn [{ json: mockData }];"
      },
      "id": "ec489c00-e799-407f-a404-9128fdc24d72",
      "name": "éªŒè¯æ‰“ç‰ˆè¾“å…¥",
      "type": "n8n-nodes-base.code",
      "position": [
        -624,
        -32
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.description }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -160,
        -32
      ],
      "id": "8d741cee-3d8f-4316-829a-637a98a90463",
      "name": "AI Agent æ‰“ç‰ˆåˆ†æ"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "claude-3-5-sonnet-20241022",
          "mode": "list",
          "cachedResultName": "Claude Sonnet 3.5 (New)"
        },
        "options": {}
      },
      "id": "8af384c7-32be-41e9-a07e-65620e48abfe",
      "name": "Claude æ‰“ç‰ˆåˆ†æ",
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "position": [
        -160,
        128
      ],
      "typeVersion": 1.3,
      "credentials": {
        "anthropicApi": {
          "id": "2yygkXpqmsCmEtAB",
          "name": "claude-workshop"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// æ ¼å¼åŒ–æ‰“ç‰ˆåˆ†æç»“æœ\nconst input = $input.first().json;\nconst analysis = input.output || input.text || input.message || '';\n\n// å®Œæ•´ä¿ç•™ Markdown æ ¼å¼çš„åˆ†æ\nconst result = {\n  success: true,\n  analysis: analysis,\n  metadata: {\n    timestamp: new Date().toISOString(),\n    source: 'ai_pattern_analysis',\n    confidence: 'high',\n    hasImageAnalysis: true,\n    analysisType: 'demo_with_fake_image_analysis'\n  }\n};\n\n// æ™ºèƒ½æå–ç« èŠ‚æ ‡é¢˜\nconst sections = [];\nconst headingRegex = /^#{1,3}\\s+(.+)$/gm;\nlet match;\nwhile ((match = headingRegex.exec(analysis)) !== null) {\n  sections.push(match[1].trim());\n}\n\nif (sections.length > 0) {\n  result.metadata.sections = sections;\n}\n\nreturn [{ json: result }];"
      },
      "id": "93f329f5-4bde-4969-8c90-2c9de6b690be",
      "name": "æ ¼å¼åŒ–æ‰“ç‰ˆåˆ†æç»“æœ",
      "type": "n8n-nodes-base.code",
      "position": [
        80,
        -32
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        272,
        -32
      ],
      "id": "00558619-2e12-4c08-addf-27e5b2132484",
      "name": "è¿”å›ç»“æœ1"
    },
    {
      "parameters": {
        "jsCode": "// ç”Ÿæˆå‡çš„å›¾ç‰‡åˆ†æç»“æœï¼ˆæ¼”ç¤ºç”¨ï¼‰\nconst input = $input.first().json;\n\n// é¢„è®¾çš„å›¾ç‰‡åˆ†ææ–‡æœ¬ï¼Œå‡è£…æ˜¯ AI ä»å›¾ç‰‡ä¸­åˆ†æå‡ºæ¥çš„\nconst fakeImageAnalysis = `## ğŸ“¸ å›¾ç‰‡åˆ†æç»“æœ\n\n**æœè£…ç±»å‹**: Oversized å·¥è£…é£æ ¼å¤¹å…‹\n\n**æ¬¾å¼ç‰¹ç‚¹**:\n- å®½æ¾ç‰ˆå‹è®¾è®¡ï¼Œè¡—å¤´æ½®æµé£æ ¼\n- å¤šå£è¢‹æ‹¼æ¥å·¥è‰ºï¼ˆèƒ¸å‰2ä¸ªè´´è¢‹ + ä¸‹æ‘†2ä¸ªæ–œæ’è¢‹ï¼‰\n- è½è‚©è¢–è®¾è®¡ï¼Œå¢åŠ ä¼‘é—²æ„Ÿ\n- å‰è¥Ÿæ‹‰é“¾ + æŒ‰æ‰£åŒå¼€åˆç³»ç»Ÿ\n- é¢†å£å¯ç«‹å¯ç¿»è®¾è®¡\n\n**é¢æ–™åˆ¤æ–­**: \n- ä¸»ä½“é¢æ–™ï¼šåšå®æ£‰è´¨æ–œçº¹å¸ƒï¼ˆçº¦280-320gsmï¼‰\n- æ‹¼æ¥éƒ¨åˆ†ï¼šå°¼é¾™é˜²æ°´é¢æ–™æˆ–å¸†å¸ƒ\n- é‡Œå¸ƒï¼šå¯èƒ½éœ€è¦ç½‘çœ¼å†…è¡¬æˆ–ä¿æš–å¤¹å±‚\n\n**å·¥è‰ºéš¾ç‚¹è¯†åˆ«**:\n1. **å¤šç‰‡æ‹¼æ¥** - å‰ç‰‡ã€åç‰‡ã€è¢–å­å¤šå¤„æ‹¼æ¥ï¼Œéœ€è¦ç²¾å‡†å¯¹ä½\n2. **å£è¢‹ç«‹ä½“é€ å‹** - è´´è¢‹éœ€è¦æ‰“ç‰ˆæ—¶è®¡ç®—ç«‹ä½“ç©ºé—´\n3. **è½è‚©è¢–å‹** - è¢–çª¿å¼§åº¦éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œå½±å“èˆ’é€‚åº¦\n4. **åŒå¼€åˆç³»ç»Ÿ** - æ‹‰é“¾å’ŒæŒ‰æ‰£éœ€è¦ç²¾ç¡®å®šä½\n5. **æ‹¼æ¥çº¿æ¡** - è£…é¥°æ€§æ‹¼æ¥çº¿éœ€è¦ä¿è¯è§†è§‰å¹³è¡¡\n\n**é…è‰²**: å†›ç»¿è‰²/å¡å…¶è‰²ä¸»ä½“ + é»‘è‰²æ‹¼æ¥\n\n**é¢„ä¼°ç‰ˆå‹å¤æ‚åº¦**: â­â­â­â­ (ä¸­é«˜éš¾åº¦)\n`;\n\n// åˆå¹¶å‡åˆ†æç»“æœ + ç”¨æˆ·éœ€æ±‚æè¿°\nconst userRequest = input.description || \"è¯„ä¼°æ‰“ç‰ˆéš¾åº¦å’Œé£é™©\";\nconst combinedDescription = `${fakeImageAnalysis}\n\n---\n\n## ğŸ‘¤ ç”¨æˆ·éœ€æ±‚\n${userRequest}\n\n**é£æ ¼**: ${input.style}\n**æœŸæœ›é¢æ–™**: ${input.material}\n\nè¯·åŸºäºä»¥ä¸Šå›¾ç‰‡åˆ†æç»“æœï¼Œæä¾›ä¸“ä¸šçš„æ‰“ç‰ˆé£é™©è¯„ä¼°ã€‚`;\n\nreturn [{ \n  json: { \n    description: combinedDescription,\n    imageAnalysis: fakeImageAnalysis,\n    style: input.style,\n    material: input.material,\n    hasImage: !!input.image\n  } \n}];"
      },
      "id": "26000915-8fdc-44ec-a0ee-a18838c5a866",
      "name": "ç”Ÿæˆå›¾ç‰‡åˆ†æ",
      "type": "n8n-nodes-base.code",
      "position": [
        -400,
        -32
      ],
      "typeVersion": 2
    }
  ],
  "pinData": {
    "çŸ¥è¯†é—®ç­” Webhook1": [
      {
        "json": {
          "name": "First item",
          "code": 1
        }
      },
      {
        "json": {
          "name": "Second item",
          "code": 2
        }
      }
    ]
  },
  "connections": {
    "å­˜å‚¨å‘é‡åˆ°Pinecone1": {
      "main": [
        [
          {
            "node": "å†™å…¥æ—¥å¿—(å¯é€‰)1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI åµŒå…¥æ¨¡å‹ï¼ˆå­˜å‚¨ï¼‰1": {
      "ai_embedding": [
        [
          {
            "node": "å­˜å‚¨å‘é‡åˆ°Pinecone1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "æ–‡æœ¬åˆ†å‰²å™¨1": {
      "ai_textSplitter": [
        [
          {
            "node": "æ–‡æ¡£åŠ è½½å™¨1",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "æ–‡æ¡£åŠ è½½å™¨1": {
      "ai_document": [
        [
          {
            "node": "å­˜å‚¨å‘é‡åˆ°Pinecone1",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "ä¸‹è½½æ–‡ä»¶1": {
      "main": [
        [
          {
            "node": "å­˜å‚¨å‘é‡åˆ°Pinecone1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive è§¦å‘å™¨1": {
      "main": [
        [
          {
            "node": "ä¸‹è½½æ–‡ä»¶1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent ä¾›åº”å•†åˆ†æ": {
      "main": [
        [
          {
            "node": "æ ¼å¼åŒ–è¾“å‡ºç»“æœ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ ¼å¼åŒ–è¾“å‡ºç»“æœ": {
      "main": [
        [
          {
            "node": "è¿”å›ç»“æœ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä¾›åº”é“¾æŸ¥è¯¢ Webhook1": {
      "main": [
        [
          {
            "node": "éªŒè¯ä¾›åº”å•†è¾“å…¥1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude ä¾›åº”å•†åˆ†æ1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent ä¾›åº”å•†åˆ†æ",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "éªŒè¯ä¾›åº”å•†è¾“å…¥1": {
      "main": [
        [
          {
            "node": "AI Agent ä¾›åº”å•†åˆ†æ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "æ ¼å¼åŒ–é—®ç­”è¾“å‡º1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude çŸ¥è¯†é—®ç­”1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "çŸ¥è¯†åº“æ£€ç´¢1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI åµŒå…¥æ¨¡å‹1": {
      "ai_embedding": [
        [
          {
            "node": "çŸ¥è¯†åº“æ£€ç´¢1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "éªŒè¯é—®ç­”è¾“å…¥1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "çŸ¥è¯†é—®ç­” Webhook1": {
      "main": [
        [
          {
            "node": "éªŒè¯é—®ç­”è¾“å…¥1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ ¼å¼åŒ–é—®ç­”è¾“å‡º1": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent3": {
      "main": [
        [
          {
            "node": "æ ¼å¼åŒ–çµæ„Ÿåˆ†æç»“æœ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude çµæ„Ÿåˆ†æ1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive è¶‹åŠ¿æœç´¢1": {
      "main": [
        [
          {
            "node": "æ ¼å¼åŒ–çµæ„Ÿåˆ†æç»“æœ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éªŒè¯çµæ„Ÿè¾“å…¥1": {
      "main": [
        [
          {
            "node": "AI Agent3",
            "type": "main",
            "index": 0
          },
          {
            "node": "Google Drive è¶‹åŠ¿æœç´¢1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "çµæ„Ÿæ”¶é›† Webhook1": {
      "main": [
        [
          {
            "node": "éªŒè¯çµæ„Ÿè¾“å…¥1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ ¼å¼åŒ–çµæ„Ÿåˆ†æç»“æœ1": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ‰“ç‰ˆå¸®åŠ©Webhook": {
      "main": [
        [
          {
            "node": "éªŒè¯æ‰“ç‰ˆè¾“å…¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "éªŒè¯æ‰“ç‰ˆè¾“å…¥": {
      "main": [
        [
          {
            "node": "ç”Ÿæˆå›¾ç‰‡åˆ†æ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent æ‰“ç‰ˆåˆ†æ": {
      "main": [
        [
          {
            "node": "æ ¼å¼åŒ–æ‰“ç‰ˆåˆ†æç»“æœ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude æ‰“ç‰ˆåˆ†æ": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent æ‰“ç‰ˆåˆ†æ",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "æ ¼å¼åŒ–æ‰“ç‰ˆåˆ†æç»“æœ": {
      "main": [
        [
          {
            "node": "è¿”å›ç»“æœ1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ç”Ÿæˆå›¾ç‰‡åˆ†æ": {
      "main": [
        [
          {
            "node": "AI Agent æ‰“ç‰ˆåˆ†æ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "25bc7cc4-b7be-4fcc-b733-c820ba5bcce6",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "5cb72472896fce0666bc03ef84936c4f09ec11e6b4f95f9aebe3d538947c7935"
  },
  "id": "S7Cesgno5n7plBUz",
  "tags": []
}